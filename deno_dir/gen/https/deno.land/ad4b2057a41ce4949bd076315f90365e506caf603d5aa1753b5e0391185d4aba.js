export default function randomInt(max, min, cb) {
    if (typeof max === "number" && typeof min === "number") {
        [max, min] = [min, max];
    }
    if (min === undefined)
        min = 0;
    else if (typeof min === "function") {
        cb = min;
        min = 0;
    }
    if (!Number.isSafeInteger(min) ||
        typeof max === "number" && !Number.isSafeInteger(max)) {
        throw new Error("max or min is not a Safe Number");
    }
    if (max - min > Math.pow(2, 48)) {
        throw new RangeError("max - min should be less than 2^48!");
    }
    if (min >= max) {
        throw new Error("Min is bigger than Max!");
    }
    const randomBuffer = new Uint32Array(1);
    crypto.getRandomValues(randomBuffer);
    const randomNumber = randomBuffer[0] / (0xffffffff + 1);
    min = Math.ceil(min);
    max = Math.floor(max);
    const result = Math.floor(randomNumber * (max - min + 1)) + min;
    if (cb) {
        cb(null, result);
        return;
    }
    return result;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFuZG9tSW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmFuZG9tSW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWFBLE1BQU0sQ0FBQyxPQUFPLFVBQVUsU0FBUyxDQUMvQixHQUFXLEVBQ1gsR0FBd0QsRUFDeEQsRUFBNEM7SUFFNUMsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLElBQUksT0FBTyxHQUFHLEtBQUssUUFBUSxFQUFFO1FBQ3RELENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0tBQ3pCO0lBQ0QsSUFBSSxHQUFHLEtBQUssU0FBUztRQUFFLEdBQUcsR0FBRyxDQUFDLENBQUM7U0FDMUIsSUFBSSxPQUFPLEdBQUcsS0FBSyxVQUFVLEVBQUU7UUFDbEMsRUFBRSxHQUFHLEdBQUcsQ0FBQztRQUNULEdBQUcsR0FBRyxDQUFDLENBQUM7S0FDVDtJQUVELElBQ0UsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQztRQUMxQixPQUFPLEdBQUcsS0FBSyxRQUFRLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxFQUNyRDtRQUNBLE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQztLQUNwRDtJQUVELElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRTtRQUMvQixNQUFNLElBQUksVUFBVSxDQUFDLHFDQUFxQyxDQUFDLENBQUM7S0FDN0Q7SUFFRCxJQUFJLEdBQUcsSUFBSSxHQUFHLEVBQUU7UUFDZCxNQUFNLElBQUksS0FBSyxDQUFDLHlCQUF5QixDQUFDLENBQUM7S0FDNUM7SUFFRCxNQUFNLFlBQVksR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV4QyxNQUFNLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBRXJDLE1BQU0sWUFBWSxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUV4RCxHQUFHLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNyQixHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUV0QixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7SUFFaEUsSUFBSSxFQUFFLEVBQUU7UUFDTixFQUFFLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2pCLE9BQU87S0FDUjtJQUVELE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyIHRoZSBEZW5vIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmFuZG9tSW50KG1heDogbnVtYmVyKTogbnVtYmVyO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmFuZG9tSW50KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlcjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJhbmRvbUludChcbiAgbWF4OiBudW1iZXIsXG4gIGNiOiAoZXJyOiBFcnJvciB8IG51bGwsIG4/OiBudW1iZXIpID0+IHZvaWQsXG4pOiB2b2lkO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmFuZG9tSW50KFxuICBtaW46IG51bWJlcixcbiAgbWF4OiBudW1iZXIsXG4gIGNiOiAoZXJyOiBFcnJvciB8IG51bGwsIG4/OiBudW1iZXIpID0+IHZvaWQsXG4pOiB2b2lkO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByYW5kb21JbnQoXG4gIG1heDogbnVtYmVyLFxuICBtaW4/OiAoKGVycjogRXJyb3IgfCBudWxsLCBuPzogbnVtYmVyKSA9PiB2b2lkKSB8IG51bWJlcixcbiAgY2I/OiAoZXJyOiBFcnJvciB8IG51bGwsIG4/OiBudW1iZXIpID0+IHZvaWQsXG4pOiBudW1iZXIgfCB2b2lkIHtcbiAgaWYgKHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIgJiYgdHlwZW9mIG1pbiA9PT0gXCJudW1iZXJcIikge1xuICAgIFttYXgsIG1pbl0gPSBbbWluLCBtYXhdO1xuICB9XG4gIGlmIChtaW4gPT09IHVuZGVmaW5lZCkgbWluID0gMDtcbiAgZWxzZSBpZiAodHlwZW9mIG1pbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY2IgPSBtaW47XG4gICAgbWluID0gMDtcbiAgfVxuXG4gIGlmIChcbiAgICAhTnVtYmVyLmlzU2FmZUludGVnZXIobWluKSB8fFxuICAgIHR5cGVvZiBtYXggPT09IFwibnVtYmVyXCIgJiYgIU51bWJlci5pc1NhZmVJbnRlZ2VyKG1heClcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwibWF4IG9yIG1pbiBpcyBub3QgYSBTYWZlIE51bWJlclwiKTtcbiAgfVxuXG4gIGlmIChtYXggLSBtaW4gPiBNYXRoLnBvdygyLCA0OCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm1heCAtIG1pbiBzaG91bGQgYmUgbGVzcyB0aGFuIDJeNDghXCIpO1xuICB9XG5cbiAgaWYgKG1pbiA+PSBtYXgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaW4gaXMgYmlnZ2VyIHRoYW4gTWF4IVwiKTtcbiAgfVxuXG4gIGNvbnN0IHJhbmRvbUJ1ZmZlciA9IG5ldyBVaW50MzJBcnJheSgxKTtcblxuICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHJhbmRvbUJ1ZmZlcik7XG5cbiAgY29uc3QgcmFuZG9tTnVtYmVyID0gcmFuZG9tQnVmZmVyWzBdIC8gKDB4ZmZmZmZmZmYgKyAxKTtcblxuICBtaW4gPSBNYXRoLmNlaWwobWluKTtcbiAgbWF4ID0gTWF0aC5mbG9vcihtYXgpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IE1hdGguZmxvb3IocmFuZG9tTnVtYmVyICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcblxuICBpZiAoY2IpIHtcbiAgICBjYihudWxsLCByZXN1bHQpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iXX0=