import { isWindows } from "../../_util/os.ts";
import { nextTick as _nextTick } from "../_next_tick.ts";
function _arch() {
    if (Deno.build.arch == "x86_64") {
        return "x64";
    }
    else if (Deno.build.arch == "aarch64") {
        return "arm64";
    }
    else {
        throw Error("unreachable");
    }
}
export const arch = _arch();
export const chdir = Deno.chdir;
export const cwd = Deno.cwd;
export const nextTick = _nextTick;
export const env = new Proxy({}, {
    get(_target, prop) {
        return Deno.env.get(String(prop));
    },
    ownKeys: () => Reflect.ownKeys(Deno.env.toObject()),
    getOwnPropertyDescriptor: (_target, name) => {
        const e = Deno.env.toObject();
        if (name in Deno.env.toObject()) {
            const o = { enumerable: true, configurable: true };
            if (typeof name === "string") {
                o.value = e[name];
            }
            return o;
        }
    },
    set(_target, prop, value) {
        Deno.env.set(String(prop), String(value));
        return value;
    },
});
export const pid = Deno.pid;
export const platform = isWindows ? "win32" : Deno.build.os;
export const version = "v16.11.1";
export const versions = {
    node: "16.11.1",
    uv: "1.42.0",
    zlib: "1.2.11",
    brotli: "1.0.9",
    ares: "1.17.2",
    modules: "93",
    nghttp2: "1.45.1",
    napi: "8",
    llhttp: "6.0.4",
    openssl: "1.1.1l",
    cldr: "39.0",
    icu: "69.1",
    tz: "2021a",
    unicode: "13.0",
    ...Deno.version,
};
function hrtime(time) {
    const milli = performance.now();
    const sec = Math.floor(milli / 1000);
    const nano = Math.floor(milli * 1_000_000 - sec * 1_000_000_000);
    if (!time) {
        return [sec, nano];
    }
    const [prevSec, prevNano] = time;
    return [sec - prevSec, nano - prevNano];
}
hrtime.bigint = function () {
    const [sec, nano] = hrtime();
    return BigInt(sec) * 1000000000n + BigInt(nano);
};
function memoryUsage() {
    return {
        ...Deno.memoryUsage(),
        arrayBuffers: 0,
    };
}
memoryUsage.rss = function () {
    return memoryUsage().rss;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvY2Vzcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInByb2Nlc3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBTUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxRQUFRLElBQUksU0FBUyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFJekQsU0FBUyxLQUFLO0lBQ1osSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxRQUFRLEVBQUU7UUFDL0IsT0FBTyxLQUFLLENBQUM7S0FDZDtTQUFNLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUksU0FBUyxFQUFFO1FBQ3ZDLE9BQU8sT0FBTyxDQUFDO0tBQ2hCO1NBQU07UUFDTCxNQUFNLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztLQUM1QjtBQUNILENBQUM7QUFHRCxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsS0FBSyxFQUFFLENBQUM7QUFHNUIsTUFBTSxDQUFDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFHaEMsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7QUFHNUIsTUFBTSxDQUFDLE1BQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQztBQU1sQyxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQTJCLElBQUksS0FBSyxDQUFDLEVBQUUsRUFBRTtJQUN2RCxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUk7UUFDZixPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFDRCxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ25ELHdCQUF3QixFQUFFLENBQUMsT0FBTyxFQUFFLElBQUksRUFB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c291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cbi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIE5vZGUuanMgY29udHJpYnV0b3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cblxuLy8gVGhlIGZvbGxvd2luZyBhcmUgYWxsIHRoZSBwcm9jZXNzIEFQSXMgdGhhdCBkb24ndCBkZXBlbmQgb24gdGhlIHN0cmVhbSBtb2R1bGVcbi8vIFRoZXkgaGF2ZSB0byBiZSBzcGxpdCB0aGlzIHdheSB0byBwcmV2ZW50IGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuXG5pbXBvcnQgeyBpc1dpbmRvd3MgfSBmcm9tIFwiLi4vLi4vX3V0aWwvb3MudHNcIjtcbmltcG9ydCB7IG5leHRUaWNrIGFzIF9uZXh0VGljayB9IGZyb20gXCIuLi9fbmV4dF90aWNrLnRzXCI7XG5pbXBvcnQgeyBfZXhpdGluZyB9IGZyb20gXCIuL2V4aXRpbmcudHNcIjtcblxuLyoqIFJldHVybnMgdGhlIG9wZXJhdGluZyBzeXN0ZW0gQ1BVIGFyY2hpdGVjdHVyZSBmb3Igd2hpY2ggdGhlIERlbm8gYmluYXJ5IHdhcyBjb21waWxlZCAqL1xuZnVuY3Rpb24gX2FyY2goKTogc3RyaW5nIHtcbiAgaWYgKERlbm8uYnVpbGQuYXJjaCA9PSBcIng4Nl82NFwiKSB7XG4gICAgcmV0dXJuIFwieDY0XCI7XG4gIH0gZWxzZSBpZiAoRGVuby5idWlsZC5hcmNoID09IFwiYWFyY2g2NFwiKSB7XG4gICAgcmV0dXJuIFwiYXJtNjRcIjtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBFcnJvcihcInVucmVhY2hhYmxlXCIpO1xuICB9XG59XG5cbi8qKiBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzX3Byb2Nlc3NfYXJjaCAqL1xuZXhwb3J0IGNvbnN0IGFyY2ggPSBfYXJjaCgpO1xuXG4vKiogaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc19wcm9jZXNzX2NoZGlyX2RpcmVjdG9yeSAqL1xuZXhwb3J0IGNvbnN0IGNoZGlyID0gRGVuby5jaGRpcjtcblxuLyoqIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcHJvY2Vzcy5odG1sI3Byb2Nlc3NfcHJvY2Vzc19jd2QgKi9cbmV4cG9ydCBjb25zdCBjd2QgPSBEZW5vLmN3ZDtcblxuLyoqIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcHJvY2Vzcy5odG1sI3Byb2Nlc3NfcHJvY2Vzc19uZXh0dGlja19jYWxsYmFja19hcmdzICovXG5leHBvcnQgY29uc3QgbmV4dFRpY2sgPSBfbmV4dFRpY2s7XG5cbi8qKlxuICogaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc19wcm9jZXNzX2VudlxuICogUmVxdWlyZXMgZW52IHBlcm1pc3Npb25zXG4gKi9cbmV4cG9ydCBjb25zdCBlbnY6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSBuZXcgUHJveHkoe30sIHtcbiAgZ2V0KF90YXJnZXQsIHByb3ApIHtcbiAgICByZXR1cm4gRGVuby5lbnYuZ2V0KFN0cmluZyhwcm9wKSk7XG4gIH0sXG4gIG93bktleXM6ICgpID0+IFJlZmxlY3Qub3duS2V5cyhEZW5vLmVudi50b09iamVjdCgpKSxcbiAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiAoX3RhcmdldCwgbmFtZSkgPT4ge1xuICAgIGNvbnN0IGUgPSBEZW5vLmVudi50b09iamVjdCgpO1xuICAgIGlmIChuYW1lIGluIERlbm8uZW52LnRvT2JqZWN0KCkpIHtcbiAgICAgIGNvbnN0IG8gPSB7IGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9O1xuICAgICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmUgd2UgZG8gd2FudCB0byBzZXQgaXQgb25seSB3aGVuIG5hbWUgaXMgb2YgdHlwZSBzdHJpbmdcbiAgICAgICAgby52YWx1ZSA9IGVbbmFtZV07XG4gICAgICB9XG4gICAgICByZXR1cm4gbztcbiAgICB9XG4gIH0sXG4gIHNldChfdGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgIERlbm8uZW52LnNldChTdHJpbmcocHJvcCksIFN0cmluZyh2YWx1ZSkpO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbn0pO1xuXG4vKiogaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc19wcm9jZXNzX3BpZCAqL1xuZXhwb3J0IGNvbnN0IHBpZCA9IERlbm8ucGlkO1xuXG4vKiogaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc19wcm9jZXNzX3BsYXRmb3JtICovXG5leHBvcnQgY29uc3QgcGxhdGZvcm0gPSBpc1dpbmRvd3MgPyBcIndpbjMyXCIgOiBEZW5vLmJ1aWxkLm9zO1xuXG4vKipcbiAqIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvcHJvY2Vzcy5odG1sI3Byb2Nlc3NfcHJvY2Vzc192ZXJzaW9uXG4gKlxuICogVGhpcyB2YWx1ZSBpcyBoYXJkIGNvZGVkIHRvIGxhdGVzdCBzdGFibGUgcmVsZWFzZSBvZiBOb2RlLCBhc1xuICogc29tZSBwYWNrYWdlcyBhcmUgY2hlY2tpbmcgaXQgZm9yIGNvbXBhdGliaWxpdHkuIFByZXZpb3VzbHlcbiAqIGl0IHBvaW50ZWQgdG8gRGVubyB2ZXJzaW9uLCBidXQgdGhhdCBsZWQgdG8gaW5jb21wYWJpbGl0eVxuICogd2l0aCBzb21lIHBhY2thZ2VzLlxuICovXG5leHBvcnQgY29uc3QgdmVyc2lvbiA9IFwidjE2LjExLjFcIjtcblxuLyoqXG4gKiBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzX3Byb2Nlc3NfdmVyc2lvbnNcbiAqXG4gKiBUaGlzIHZhbHVlIGlzIGhhcmQgY29kZWQgdG8gbGF0ZXN0IHN0YWJsZSByZWxlYXNlIG9mIE5vZGUsIGFzXG4gKiBzb21lIHBhY2thZ2VzIGFyZSBjaGVja2luZyBpdCBmb3IgY29tcGF0aWJpbGl0eS4gUHJldmlvdXNseVxuICogaXQgY29udGFpbmVkIG9ubHkgb3V0cHV0IG9mIGBEZW5vLnZlcnNpb25gLCBidXQgdGhhdCBsZWQgdG8gaW5jb21wYWJpbGl0eVxuICogd2l0aCBzb21lIHBhY2thZ2VzLiBWYWx1ZSBvZiBgdjhgIGZpZWxkIGlzIHN0aWxsIHRha2VuIGZyb20gYERlbm8udmVyc2lvbmAuXG4gKi9cbmV4cG9ydCBjb25zdCB2ZXJzaW9ucyA9IHtcbiAgbm9kZTogXCIxNi4xMS4xXCIsXG4gIHV2OiBcIjEuNDIuMFwiLFxuICB6bGliOiBcIjEuMi4xMVwiLFxuICBicm90bGk6IFwiMS4wLjlcIixcbiAgYXJlczogXCIxLjE3LjJcIixcbiAgbW9kdWxlczogXCI5M1wiLFxuICBuZ2h0dHAyOiBcIjEuNDUuMVwiLFxuICBuYXBpOiBcIjhcIixcbiAgbGxodHRwOiBcIjYuMC40XCIsXG4gIG9wZW5zc2w6IFwiMS4xLjFsXCIsXG4gIGNsZHI6IFwiMzkuMFwiLFxuICBpY3U6IFwiNjkuMVwiLFxuICB0ejogXCIyMDIxYVwiLFxuICB1bmljb2RlOiBcIjEzLjBcIixcbiAgLi4uRGVuby52ZXJzaW9uLFxufTtcblxuZnVuY3Rpb24gaHJ0aW1lKHRpbWU/OiBbbnVtYmVyLCBudW1iZXJdKTogW251bWJlciwgbnVtYmVyXSB7XG4gIGNvbnN0IG1pbGxpID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIGNvbnN0IHNlYyA9IE1hdGguZmxvb3IobWlsbGkgLyAxMDAwKTtcbiAgY29uc3QgbmFubyA9IE1hdGguZmxvb3IobWlsbGkgKiAxXzAwMF8wMDAgLSBzZWMgKiAxXzAwMF8wMDBfMDAwKTtcbiAgaWYgKCF0aW1lKSB7XG4gICAgcmV0dXJuIFtzZWMsIG5hbm9dO1xuICB9XG4gIGNvbnN0IFtwcmV2U2VjLCBwcmV2TmFub10gPSB0aW1lO1xuICByZXR1cm4gW3NlYyAtIHByZXZTZWMsIG5hbm8gLSBwcmV2TmFub107XG59XG5cbmhydGltZS5iaWdpbnQgPSBmdW5jdGlvbiAoKTogQmlnSW50IHtcbiAgY29uc3QgW3NlYywgbmFub10gPSBocnRpbWUoKTtcbiAgcmV0dXJuIEJpZ0ludChzZWMpICogMV8wMDBfMDAwXzAwMG4gKyBCaWdJbnQobmFubyk7XG59O1xuXG5mdW5jdGlvbiBtZW1vcnlVc2FnZSgpOiB7XG4gIHJzczogbnVtYmVyO1xuICBoZWFwVG90YWw6IG51bWJlcjtcbiAgaGVhcFVzZWQ6IG51bWJlcjtcbiAgZXh0ZXJuYWw6IG51bWJlcjtcbiAgYXJyYXlCdWZmZXJzOiBudW1iZXI7XG59IHtcbiAgcmV0dXJuIHtcbiAgICAuLi5EZW5vLm1lbW9yeVVzYWdlKCksXG4gICAgYXJyYXlCdWZmZXJzOiAwLFxuICB9O1xufVxuXG5tZW1vcnlVc2FnZS5yc3MgPSBmdW5jdGlvbiAoKTogbnVtYmVyIHtcbiAgcmV0dXJuIG1lbW9yeVVzYWdlKCkucnNzO1xufTtcbiJdfQ==