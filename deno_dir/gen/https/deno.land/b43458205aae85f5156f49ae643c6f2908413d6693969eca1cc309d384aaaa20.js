import { deferred } from "./deps.ts";
export const asyncDecorator = (fn) => {
    return () => {
        const promise = deferred();
        try {
            const result = fn();
            promise.resolve(result);
        }
        catch (err) {
            promise.reject(err);
        }
        return promise;
    };
};
export const assertDefined = (value, errMsg) => {
    if (value === undefined || value == null) {
        throw new Error(errMsg);
    }
    return true;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlzYy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1pc2MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUVyQyxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsQ0FBSSxFQUFXLEVBQUUsRUFBRTtJQUMvQyxPQUFPLEdBQWUsRUFBRTtRQUN0QixNQUFNLE9BQU8sR0FBRyxRQUFRLEVBQUssQ0FBQztRQUM5QixJQUFJO1lBQ0YsTUFBTSxNQUFNLEdBQUcsRUFBRSxFQUFFLENBQUM7WUFDcEIsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUN6QjtRQUFDLE9BQU8sR0FBRyxFQUFFO1lBQ1osT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUNyQjtRQUNELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxDQUMzQixLQUEyQixFQUMzQixNQUFjLEVBQ0YsRUFBRTtJQUNkLElBQUksS0FBSyxLQUFLLFNBQVMsSUFBSSxLQUFLLElBQUksSUFBSSxFQUFFO1FBQ3hDLE1BQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDekI7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCBzaW5jZSAyMDIwLCBGcmFuY2tMZHguIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuaW1wb3J0IHsgZGVmZXJyZWQgfSBmcm9tIFwiLi9kZXBzLnRzXCI7XG5cbmV4cG9ydCBjb25zdCBhc3luY0RlY29yYXRvciA9IDxUPihmbjogKCkgPT4gVCkgPT4ge1xuICByZXR1cm4gKCk6IFByb21pc2U8VD4gPT4ge1xuICAgIGNvbnN0IHByb21pc2UgPSBkZWZlcnJlZDxUPigpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBmbigpO1xuICAgICAgcHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBwcm9taXNlLnJlamVjdChlcnIpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBhc3NlcnREZWZpbmVkID0gPFQ+KFxuICB2YWx1ZTogVCB8IHVuZGVmaW5lZCB8IG51bGwsXG4gIGVyck1zZzogc3RyaW5nLFxuKTogdmFsdWUgaXMgVCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyTXNnKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG4iXX0=